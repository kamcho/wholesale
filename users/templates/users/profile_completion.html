{% extends 'users/base.html' %}

{% block title %}Complete Your Profile - TravelsKe{% endblock %}

{% block extra_css %}
<style>
    .county-dropdown {
        position: relative;
    }
    .county-list {
        max-height: 200px;
        overflow-y: auto;
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        z-index: 50;
    }
    .county-list.show {
        display: block;
    }
    .county-item {
        cursor: pointer;
        padding: 8px 12px;
        border-bottom: 1px solid #f3f4f6;
    }
    .county-item:hover {
        background-color: #f3f4f6;
    }
    .county-item.selected {
        background-color: #dbeafe;
        color: #1d4ed8;
    }
    .search-input {
        border: none;
        outline: none;
        width: 100%;
        padding: 8px 12px;
        border-bottom: 1px solid #e5e7eb;
    }
</style>
{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-teal-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-teal-500 rounded-full mb-4">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                </svg>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Complete Your Profile</h1>
            <p class="text-gray-600">Tell us a bit more about yourself</p>
        </div>

        <!-- Progress Steps -->
        <div class="flex justify-center mb-8">
            <div class="flex items-center space-x-4">
                <div class="w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-semibold text-sm">âœ“</div>
                <div class="w-16 h-1 bg-green-500 rounded-full"></div>
                <div class="w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center font-semibold text-sm">2</div>
                <div class="w-16 h-1 bg-gray-200 rounded-full"></div>
                <div class="w-10 h-10 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center font-semibold text-sm">3</div>
            </div>
        </div>

        <!-- Profile Form -->
        <div class="bg-white rounded-2xl shadow-xl border border-gray-100 p-8">
            <form method="post">
                {% csrf_token %}
                
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="first_name" class="block text-sm font-medium text-gray-700 mb-2">
                                First Name
                            </label>
                            <input type="text" id="first_name" name="first_name" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition duration-200"
                                   placeholder="Enter your first name">
                        </div>
                        
                        <div>
                            <label for="last_name" class="block text-sm font-medium text-gray-700 mb-2">
                                Last Name
                            </label>
                            <input type="text" id="last_name" name="last_name" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition duration-200"
                                   placeholder="Enter your last name">
                        </div>
                    </div>
                    
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                            Phone Number
                        </label>
                        <input type="tel" id="phone" name="phone"
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition duration-200"
                               placeholder="Enter your phone number">
                    </div>
                    
                    <div>
                        <label for="location" class="block text-sm font-medium text-gray-700 mb-2">
                            County
                        </label>
                        <div class="county-dropdown">
                            <input type="text" 
                                   id="location" 
                                   name="location"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent transition duration-200"
                                   placeholder="Click to select your county"
                                   readonly>
                            
                            <div class="county-list" id="countyList">
                                <input type="text" 
                                       id="countySearch" 
                                       class="search-input"
                                       placeholder="Type to search counties...">
                                
                                <div id="countyOptions" class="max-h-48 overflow-y-auto">
                                    <!-- Counties will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-blue-600 to-teal-600 hover:from-blue-700 hover:to-teal-700 text-white py-3 px-4 rounded-lg font-semibold transition duration-200 shadow-lg hover:shadow-xl">
                        Continue to Preferences
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Skip Option -->
        <div class="text-center mt-6">
            <a href="" class="text-gray-500 hover:text-gray-700">
                Skip for now
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const counties = [
        'Mombasa', 'Kwale', 'Kilifi', 'Tana River', 'Lamu', 'Taita Taveta', 'Garissa', 'Wajir', 'Mandera', 'Marsabit', 'Isiolo', 'Meru', 'Tharaka Nithi', 'Embu', 'Kitui', 'Machakos', 'Makueni', 'Nyandarua', 'Nyeri', 'Kirinyaga', 'Murang\'a', 'Kiambu', 'Turkana', 'West Pokot', 'Samburu', 'Trans Nzoia', 'Uasin Gishu', 'Elgeyo Marakwet', 'Nandi', 'Baringo', 'Laikipia', 'Nakuru', 'Narok', 'Kajiado', 'Kericho', 'Bomet', 'Kakamega', 'Vihiga', 'Bungoma', 'Busia', 'Siaya', 'Kisumu', 'Homa Bay', 'Migori', 'Kisii', 'Nyamira', 'Nairobi'
    ];
    
    const locationInput = document.getElementById('location');
    const countyList = document.getElementById('countyList');
    const countySearch = document.getElementById('countySearch');
    const countyOptions = document.getElementById('countyOptions');
    
    // Populate counties
    function populateCounties(filteredCounties = counties) {
        countyOptions.innerHTML = '';
        filteredCounties.forEach(county => {
            const div = document.createElement('div');
            div.className = 'county-item';
            div.textContent = county;
            div.addEventListener('click', function() {
                locationInput.value = county;
                countyList.classList.remove('show');
            });
            countyOptions.appendChild(div);
        });
    }
    
    // Show dropdown
    locationInput.addEventListener('click', function() {
        countyList.classList.toggle('show');
        countySearch.focus();
    });
    
    // Search functionality
    countySearch.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        const filtered = counties.filter(county => 
            county.toLowerCase().includes(searchTerm)
        );
        populateCounties(filtered);
    });
    
    // Hide dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.county-dropdown')) {
            countyList.classList.remove('show');
        }
    });
    
    // Initial population
    populateCounties();
});
</script>
{% endblock %} 